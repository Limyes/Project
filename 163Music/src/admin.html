<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>管理页面</title>
	<link rel="stylesheet" href="">
	<style>
		*{padding:0;margin:0;}
		#uploadBox{padding:50px 80px;border:1px dashed #ddd;display:flex;align-items:center;justify-content:center;width:200px;flex-direction: column;}
	</style>
</head>
<body>
	<div id="uploadBox">
		<span id="uploadfile">点击或拖拽文件</span>
		<span>文件大小不能超过20MB</span>
	</div>
	<div id="uploadStatus"></div>
	<script src="../node_modules/leancloud-storage/dist/av-min.js"></script>
	<script src="../src/vendors/moxie.js"></script>
	<script src="../node_modules/plupload/js/plupload.min.js"></script>
	<script src="../node_modules/qiniu-js/dist/qiniu.min.js"></script>	
	<script>
		var APP_ID = 'CLfOJzpV8WJInFWaWPigDld2-gzGzoHsz';
		var APP_KEY = 'jp5gTcGqJl0kWu8hf612RkwK';

		// AV.init({
		//   appId: APP_ID,
		//   appKey: APP_KEY
		// });
		// var TestObject = AV.Object.extend('playList');
		// var testObject = new TestObject();
		// testObject.save({
		//   name: 'test',
		//   cover:'test',
		//   creatorId:'test',
		//   description:'test',
		//   song:['1','2']
		// }).then(function(object) {
		//   alert('LeanCloud Rocks!');
		// })
		var uploader = Qiniu.uploader({
	      runtimes: 'html5',   
	      browse_button: 'uploadfile',  
	      uptoken_url: 'http://localhost:8080/uptoken',   
	      get_new_uptoken: false,          
	      domain: 'http://pdsh2643g.bkt.clouddn.com', 
	      container: 'uploadBox',    
	      max_file_size: '20mb',
	      flash_swf_url: 'path/of/plupload/Moxie.swf',  
	      max_retries: 3, 
	      dragdrop: true,  
	      drop_element: 'uploadBox',   
	      chunk_size: '4mb', 
	      auto_start: true, 
	      init: {
	          'FilesAdded': function(up, files) {
	              plupload.each(files, function(file) {

	              });
	          },
	          'BeforeUpload': function(up, file) {
	       
	          },
	          'UploadProgress': function(up, file) {
	          	 uploadStatus.textContent = '上传中'
	          },
	          'FileUploaded': function(up, file, info) {
	                 // 每个文件上传成功后，处理相关的事情
	                 // 其中info.response是文件上传成功后，服务端返回的json，形式如：
	                 // {
	                 //    "hash": "Fh8xVqod2MQ1mocfI4S4KpRL6D98",
	                 //    "key": "gogopher.jpg"
	                 //  }
	                 // 查看简单反馈
	                 // var domain = up.getOption('domain');
	                 // var res = parseJSON(info.response);
	                 // var sourceLink = domain +"/"+ res.key; 获取上传成功后的文件的Url
	          },
	          'Error': function(up, err, errTip) {
	                 //上传出错时，处理相关的事情
	          },
	          'UploadComplete': function() {
	                 //队列文件处理完毕后，处理相关的事情
	                 uploadStatus.textContent = '上传完毕'
	          }
	      }
	  });
	</script>
</body>
</html>